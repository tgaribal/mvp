'use strict';

var express = require('express');
var parser = require('body-parser');
var mongoose = require('mongoose');

var Initiative = require('./initiativeModel');
var User = require('./userModel');

var app = express();
app.use(parser.json());

mongoose.connect('mongodb://localhost/ivote');

var db = mongoose.connection;
db.on('error', console.error);
db.once('open', function () {
  console.log('Open Mongoose connection');
});

app.get('/initiatives', function (req, res) {
  console.log("helpo!");
  var initiatives = {};
  Initiative.find({}, function (err, initiative) {
    initiatives[initiative.name] = initiative;
  });
  console.log(initiatives);
  res.send(initiatives);
});

// app.post('/', function (req, res) {
//   console.log('helpppppp')
//   res.send('post works');
// })
// exports.getInitiatives = function (req, res) {
//   Initiative.find().exec(function (err, initiatives) {
//     res.status(200).send(initiatives);
//   })
// }

// exports.vote = function (req, res) {
//   console.log(req.body);
// }


app.listen(8080, function (err) {
  if (err) {
    console.log("ERROR!!!!!");
  } else {
    console.log("Started listening on port 8080");
  }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NlcnZlci9zZXJ2ZXIuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJwYXJzZXIiLCJtb25nb29zZSIsIkluaXRpYXRpdmUiLCJVc2VyIiwiYXBwIiwidXNlIiwianNvbiIsImNvbm5lY3QiLCJkYiIsImNvbm5lY3Rpb24iLCJvbiIsImNvbnNvbGUiLCJlcnJvciIsIm9uY2UiLCJsb2ciLCJnZXQiLCJyZXEiLCJyZXMiLCJpbml0aWF0aXZlcyIsImZpbmQiLCJlcnIiLCJpbml0aWF0aXZlIiwibmFtZSIsInNlbmQiLCJsaXN0ZW4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsVUFBVUMsUUFBUSxTQUFSLENBQWQ7QUFDQSxJQUFJQyxTQUFTRCxRQUFRLGFBQVIsQ0FBYjtBQUNBLElBQUlFLFdBQVdGLFFBQVEsVUFBUixDQUFmOztBQUVBLElBQUlHLGFBQWFILFFBQVEsbUJBQVIsQ0FBakI7QUFDQSxJQUFJSSxPQUFPSixRQUFRLGFBQVIsQ0FBWDs7QUFFQSxJQUFJSyxNQUFNTixTQUFWO0FBQ0FNLElBQUlDLEdBQUosQ0FBUUwsT0FBT00sSUFBUCxFQUFSOztBQUVBTCxTQUFTTSxPQUFULENBQWlCLDJCQUFqQjs7QUFFQSxJQUFJQyxLQUFLUCxTQUFTUSxVQUFsQjtBQUNBRCxHQUFHRSxFQUFILENBQU0sT0FBTixFQUFlQyxRQUFRQyxLQUF2QjtBQUNBSixHQUFHSyxJQUFILENBQVEsTUFBUixFQUFnQixZQUFZO0FBQzFCRixVQUFRRyxHQUFSLENBQVksMEJBQVo7QUFDRCxDQUZEOztBQU1BVixJQUFJVyxHQUFKLENBQVEsY0FBUixFQUF3QixVQUFVQyxHQUFWLEVBQWVDLEdBQWYsRUFBb0I7QUFDMUNOLFVBQVFHLEdBQVIsQ0FBWSxRQUFaO0FBQ0EsTUFBSUksY0FBYyxFQUFsQjtBQUNBaEIsYUFBV2lCLElBQVgsQ0FBZ0IsRUFBaEIsRUFBb0IsVUFBU0MsR0FBVCxFQUFjQyxVQUFkLEVBQTBCO0FBQzVDSCxnQkFBWUcsV0FBV0MsSUFBdkIsSUFBK0JELFVBQS9CO0FBQ0QsR0FGRDtBQUdBVixVQUFRRyxHQUFSLENBQVlJLFdBQVo7QUFDQUQsTUFBSU0sSUFBSixDQUFTTCxXQUFUO0FBQ0QsQ0FSRDs7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQWQsSUFBSW9CLE1BQUosQ0FBVyxJQUFYLEVBQWlCLFVBQVNKLEdBQVQsRUFBYztBQUM3QixNQUFJQSxHQUFKLEVBQVM7QUFDUFQsWUFBUUcsR0FBUixDQUFZLFlBQVo7QUFDRCxHQUZELE1BRVE7QUFDTkgsWUFBUUcsR0FBUixDQUFZLGdDQUFaO0FBRUQ7QUFDRixDQVBEIiwiZmlsZSI6InNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJylcbnZhciBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5cbnZhciBJbml0aWF0aXZlID0gcmVxdWlyZSgnLi9pbml0aWF0aXZlTW9kZWwnKTtcbnZhciBVc2VyID0gcmVxdWlyZSgnLi91c2VyTW9kZWwnKTtcblxudmFyIGFwcCA9IGV4cHJlc3MoKTtcbmFwcC51c2UocGFyc2VyLmpzb24oKSk7XG5cbm1vbmdvb3NlLmNvbm5lY3QoJ21vbmdvZGI6Ly9sb2NhbGhvc3QvaXZvdGUnKTtcblxudmFyIGRiID0gbW9uZ29vc2UuY29ubmVjdGlvbjtcbmRiLm9uKCdlcnJvcicsIGNvbnNvbGUuZXJyb3IpO1xuZGIub25jZSgnb3BlbicsIGZ1bmN0aW9uICgpIHtcbiAgY29uc29sZS5sb2coJ09wZW4gTW9uZ29vc2UgY29ubmVjdGlvbicpXG59KTtcblxuXG5cbmFwcC5nZXQoJy9pbml0aWF0aXZlcycsIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICBjb25zb2xlLmxvZyhcImhlbHBvIVwiKVxuICB2YXIgaW5pdGlhdGl2ZXMgPSB7fVxuICBJbml0aWF0aXZlLmZpbmQoe30sIGZ1bmN0aW9uKGVyciwgaW5pdGlhdGl2ZSkge1xuICAgIGluaXRpYXRpdmVzW2luaXRpYXRpdmUubmFtZV0gPSBpbml0aWF0aXZlOyBcbiAgfSlcbiAgY29uc29sZS5sb2coaW5pdGlhdGl2ZXMpXG4gIHJlcy5zZW5kKGluaXRpYXRpdmVzKTtcbn0pXG5cbi8vIGFwcC5wb3N0KCcvJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4vLyAgIGNvbnNvbGUubG9nKCdoZWxwcHBwcHAnKVxuLy8gICByZXMuc2VuZCgncG9zdCB3b3JrcycpO1xuLy8gfSlcbi8vIGV4cG9ydHMuZ2V0SW5pdGlhdGl2ZXMgPSBmdW5jdGlvbiAocmVxLCByZXMpIHtcbi8vICAgSW5pdGlhdGl2ZS5maW5kKCkuZXhlYyhmdW5jdGlvbiAoZXJyLCBpbml0aWF0aXZlcykge1xuLy8gICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGluaXRpYXRpdmVzKTtcbi8vICAgfSlcbi8vIH1cblxuLy8gZXhwb3J0cy52b3RlID0gZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4vLyAgIGNvbnNvbGUubG9nKHJlcS5ib2R5KTtcbi8vIH1cblxuXG5hcHAubGlzdGVuKDgwODAsIGZ1bmN0aW9uKGVycikge1xuICBpZiAoZXJyKSB7XG4gICAgY29uc29sZS5sb2coXCJFUlJPUiEhISEhXCIpXG4gIH0gZWxzZSAge1xuICAgIGNvbnNvbGUubG9nKFwiU3RhcnRlZCBsaXN0ZW5pbmcgb24gcG9ydCA4MDgwXCIpO1xuICAgIFxuICB9XG59KTtcbiJdfQ==